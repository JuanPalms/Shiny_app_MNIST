from flask import Flask, request
import json
import psycopg2
import psycopg2.extras
import os
# Estructura del uri:
# "motor://user:password@host:port/database"
database_uri = f'postgresql://{os.environ["PGUSR"]}:{os.environ["PGPASS"]}@{os.environ["PGHOST"]}:5432/{os.environ["PGDB"]}'

app = Flask(__name__)
conn = psycopg2.connect(database_uri)

#@app.route('/')
#def home():
 #   cur = conn.cursor(cursor_factory=psycopg2.extras.NamedTupleCursor)
  #  cur.execute("select * from users")
   # results = cur.fetchall()
    #cur.close()
    #return json.dumps([x._asdict() for x in results], default=str)

#
#@app.route('/MNIST', methods=['GET'])
#def MNIST():
 #   cur = conn.cursor(cursor_factory=psycopg2.extras.NamedTupleCursor)
  #  user_id = request.args.get("id")
   
# cur.execute(f"select * from MNIST")
 #   results = cur.fetchall()
  #  cur.close()
   # return json.dumps([x._asdict() for x in results], default=str)



@app.route('/MNIST', methods=["POST","GET"])
def MNIST(): 
	if request.method == "GET":
		cur = conn.cursor(cursor_factory=psycopg2.extras.NamedTupleCursor)
		user_id = request.args.get("id")
		cur.execute(f"select * from MNIST")
		results = cur.fetchall()
		cur.close()
		return json.dumps([x._asdict() for x in results], default=str)
	
	if request.method == "POST":
        	MNIST = json.loads(request.data)
        	cur = conn.cursor()
        	cur.execute("insert into MNIST(label,pixel0, pixel1, pixel2, pixel3, pixel4, pixel5, pixel6, pixel7, pixel8, pixel9, pixel10, pixel11, pixel12, pixel13, pixel14, pixel15, pixel16, pixel17, pixel18, pixel19, pixel20, pixel21, pixel22, pixel23, pixel24, pixel25, pixel26, pixel27, pixel28, pixel29, pixel30, pixel31, pixel32, pixel33, pixel34, pixel35, pixel36, pixel37, pixel38, pixel39, pixel40, pixel41, pixel42, pixel43, pixel44, pixel45, pixel46, pixel47, pixel48, pixel49, pixel50, pixel51, pixel52, pixel53, pixel54, pixel55, pixel56, pixel57, pixel58, pixel59, pixel60, pixel61, pixel62, pixel63, pixel64, pixel65, pixel66, pixel67, pixel68, pixel69, pixel70, pixel71, pixel72, pixel73, pixel74, pixel75, pixel76, pixel77, pixel78, pixel79, pixel80, pixel81, pixel82, pixel83, pixel84, pixel85, pixel86, pixel87, pixel88, pixel89, pixel90, pixel91, pixel92, pixel93, pixel94, pixel95, pixel96, pixel97, pixel98, pixel99, pixel100, pixel101, pixel102, pixel103, pixel104, pixel105, pixel106, pixel107, pixel108, pixel109, pixel110, pixel111, pixel112, pixel113, pixel114, pixel115, pixel116, pixel117, pixel118, pixel119, pixel120, pixel121, pixel122, pixel123, pixel124, pixel125, pixel126, pixel127, pixel128, pixel129, pixel130, pixel131, pixel132, pixel133, pixel134, pixel135, pixel136, pixel137, pixel138, pixel139, pixel140, pixel141, pixel142, pixel143, pixel144, pixel145, pixel146, pixel147, pixel148, pixel149, pixel150, pixel151, pixel152, pixel153, pixel154, pixel155, pixel156, pixel157, pixel158, pixel159, pixel160, pixel161, pixel162, pixel163, pixel164, pixel165, pixel166, pixel167, pixel168, pixel169, pixel170, pixel171, pixel172, pixel173, pixel174, pixel175, pixel176, pixel177, pixel178, pixel179, pixel180, pixel181, pixel182, pixel183, pixel184, pixel185, pixel186, pixel187, pixel188, pixel189, pixel190, pixel191, pixel192, pixel193, pixel194, pixel195, pixel196, pixel197, pixel198, pixel199, pixel200, pixel201, pixel202, pixel203, pixel204, pixel205, pixel206, pixel207, pixel208, pixel209, pixel210, pixel211, pixel212, pixel213, pixel214, pixel215, pixel216, pixel217, pixel218, pixel219, pixel220, pixel221, pixel222, pixel223, pixel224, pixel225, pixel226, pixel227, pixel228, pixel229, pixel230, pixel231, pixel232, pixel233, pixel234, pixel235, pixel236, pixel237, pixel238, pixel239, pixel240, pixel241, pixel242, pixel243, pixel244, pixel245, pixel246, pixel247, pixel248, pixel249, pixel250, pixel251, pixel252, pixel253, pixel254, pixel255, pixel256, pixel257, pixel258, pixel259, pixel260, pixel261, pixel262, pixel263, pixel264, pixel265, pixel266, pixel267, pixel268, pixel269, pixel270, pixel271, pixel272, pixel273, pixel274, pixel275, pixel276, pixel277, pixel278, pixel279, pixel280, pixel281, pixel282, pixel283, pixel284, pixel285, pixel286, pixel287, pixel288, pixel289, pixel290, pixel291, pixel292, pixel293, pixel294, pixel295, pixel296, pixel297, pixel298, pixel299, pixel300, pixel301, pixel302, pixel303, pixel304, pixel305, pixel306, pixel307, pixel308, pixel309, pixel310, pixel311, pixel312, pixel313, pixel314, pixel315, pixel316, pixel317, pixel318, pixel319, pixel320, pixel321, pixel322, pixel323, pixel324, pixel325, pixel326, pixel327, pixel328, pixel329, pixel330, pixel331, pixel332, pixel333, pixel334, pixel335, pixel336, pixel337, pixel338, pixel339, pixel340, pixel341, pixel342, pixel343, pixel344, pixel345, pixel346, pixel347, pixel348, pixel349, pixel350, pixel351, pixel352, pixel353, pixel354, pixel355, pixel356, pixel357, pixel358, pixel359, pixel360, pixel361, pixel362, pixel363, pixel364, pixel365, pixel366, pixel367, pixel368, pixel369, pixel370, pixel371, pixel372, pixel373, pixel374, pixel375, pixel376, pixel377, pixel378, pixel379, pixel380, pixel381, pixel382, pixel383, pixel384, pixel385, pixel386, pixel387, pixel388, pixel389, pixel390, pixel391, pixel392, pixel393, pixel394, pixel395, pixel396, pixel397, pixel398, pixel399, pixel400, pixel401, pixel402, pixel403, pixel404, pixel405, pixel406, pixel407, pixel408, pixel409, pixel410, pixel411, pixel412, pixel413, pixel414, pixel415, pixel416, pixel417, pixel418, pixel419, pixel420, pixel421, pixel422, pixel423, pixel424, pixel425, pixel426, pixel427, pixel428, pixel429, pixel430, pixel431, pixel432, pixel433, pixel434, pixel435, pixel436, pixel437, pixel438, pixel439, pixel440, pixel441, pixel442, pixel443, pixel444, pixel445, pixel446, pixel447, pixel448, pixel449, pixel450, pixel451, pixel452, pixel453, pixel454, pixel455, pixel456, pixel457, pixel458, pixel459, pixel460, pixel461, pixel462, pixel463, pixel464, pixel465, pixel466, pixel467, pixel468, pixel469, pixel470, pixel471, pixel472, pixel473, pixel474, pixel475, pixel476, pixel477, pixel478, pixel479, pixel480, pixel481, pixel482, pixel483, pixel484, pixel485, pixel486, pixel487, pixel488, pixel489, pixel490, pixel491, pixel492, pixel493, pixel494, pixel495, pixel496, pixel497, pixel498, pixel499, pixel500, pixel501, pixel502, pixel503, pixel504, pixel505, pixel506, pixel507, pixel508, pixel509, pixel510, pixel511, pixel512, pixel513, pixel514, pixel515, pixel516, pixel517, pixel518, pixel519, pixel520, pixel521, pixel522, pixel523, pixel524, pixel525, pixel526, pixel527, pixel528, pixel529, pixel530, pixel531, pixel532, pixel533, pixel534, pixel535, pixel536, pixel537, pixel538, pixel539, pixel540, pixel541, pixel542, pixel543, pixel544, pixel545, pixel546, pixel547, pixel548, pixel549, pixel550, pixel551, pixel552, pixel553, pixel554, pixel555, pixel556, pixel557, pixel558, pixel559, pixel560, pixel561, pixel562, pixel563, pixel564, pixel565, pixel566, pixel567, pixel568, pixel569, pixel570, pixel571, pixel572, pixel573, pixel574, pixel575, pixel576, pixel577, pixel578, pixel579, pixel580, pixel581, pixel582, pixel583, pixel584, pixel585, pixel586, pixel587, pixel588, pixel589, pixel590, pixel591, pixel592, pixel593, pixel594, pixel595, pixel596, pixel597, pixel598, pixel599, pixel600, pixel601, pixel602, pixel603, pixel604, pixel605, pixel606, pixel607, pixel608, pixel609, pixel610, pixel611, pixel612, pixel613, pixel614, pixel615, pixel616, pixel617, pixel618, pixel619, pixel620, pixel621, pixel622, pixel623, pixel624, pixel625, pixel626, pixel627, pixel628, pixel629, pixel630, pixel631, pixel632, pixel633, pixel634, pixel635, pixel636, pixel637, pixel638, pixel639, pixel640, pixel641, pixel642, pixel643, pixel644, pixel645, pixel646, pixel647, pixel648, pixel649, pixel650, pixel651, pixel652, pixel653, pixel654, pixel655, pixel656, pixel657, pixel658, pixel659, pixel660, pixel661, pixel662, pixel663, pixel664, pixel665, pixel666, pixel667, pixel668, pixel669, pixel670, pixel671, pixel672, pixel673, pixel674, pixel675, pixel676, pixel677, pixel678, pixel679, pixel680, pixel681, pixel682, pixel683, pixel684, pixel685, pixel686, pixel687, pixel688, pixel689, pixel690, pixel691, pixel692, pixel693, pixel694, pixel695, pixel696, pixel697, pixel698, pixel699, pixel700, pixel701, pixel702, pixel703, pixel704, pixel705, pixel706, pixel707, pixel708, pixel709, pixel710, pixel711, pixel712, pixel713, pixel714, pixel715, pixel716, pixel717, pixel718, pixel719, pixel720, pixel721, pixel722, pixel723, pixel724, pixel725, pixel726, pixel727, pixel728, pixel729, pixel730, pixel731, pixel732, pixel733, pixel734, pixel735, pixel736, pixel737, pixel738, pixel739, pixel740, pixel741, pixel742, pixel743, pixel744, pixel745, pixel746, pixel747, pixel748, pixel749, pixel750, pixel751, pixel752, pixel753, pixel754, pixel755, pixel756, pixel757, pixel758, pixel759, pixel760, pixel761, pixel762, pixel763, pixel764, pixel765, pixel766, pixel767, pixel768, pixel769, pixel770, pixel771, pixel772, pixel773, pixel774, pixel775, pixel776, pixel777, pixel778, pixel779, pixel780, pixel781, pixel782, pixel783) values (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)",
            	(MNIST[0]["label"], MNIST[0]["pixel0"], MNIST[0]["pixel1"], MNIST[0]["pixel2"], MNIST[0]["pixel3"], MNIST[0]["pixel4"], MNIST[0]["pixel5"], MNIST[0]["pixel6"], MNIST[0]["pixel7"], MNIST[0]["pixel8"], MNIST[0]["pixel9"], MNIST[0]["pixel10"], MNIST[0]["pixel11"], MNIST[0]["pixel12"], MNIST[0]["pixel13"], MNIST[0]["pixel14"], MNIST[0]["pixel15"], MNIST[0]["pixel16"], MNIST[0]["pixel17"], MNIST[0]["pixel18"], MNIST[0]["pixel19"], MNIST[0]["pixel20"], MNIST[0]["pixel21"], MNIST[0]["pixel22"], MNIST[0]["pixel23"], MNIST[0]["pixel24"], MNIST[0]["pixel25"], MNIST[0]["pixel26"], MNIST[0]["pixel27"], MNIST[0]["pixel28"], MNIST[0]["pixel29"], MNIST[0]["pixel30"], MNIST[0]["pixel31"], MNIST[0]["pixel32"], MNIST[0]["pixel33"], MNIST[0]["pixel34"], MNIST[0]["pixel35"], MNIST[0]["pixel36"], MNIST[0]["pixel37"], MNIST[0]["pixel38"], MNIST[0]["pixel39"], MNIST[0]["pixel40"], MNIST[0]["pixel41"], MNIST[0]["pixel42"], MNIST[0]["pixel43"], MNIST[0]["pixel44"], MNIST[0]["pixel45"], MNIST[0]["pixel46"], MNIST[0]["pixel47"], MNIST[0]["pixel48"], MNIST[0]["pixel49"], MNIST[0]["pixel50"], MNIST[0]["pixel51"], MNIST[0]["pixel52"], MNIST[0]["pixel53"], MNIST[0]["pixel54"], MNIST[0]["pixel55"], MNIST[0]["pixel56"], MNIST[0]["pixel57"], MNIST[0]["pixel58"], MNIST[0]["pixel59"], MNIST[0]["pixel60"], MNIST[0]["pixel61"], MNIST[0]["pixel62"], MNIST[0]["pixel63"], MNIST[0]["pixel64"], MNIST[0]["pixel65"], MNIST[0]["pixel66"], MNIST[0]["pixel67"], MNIST[0]["pixel68"], MNIST[0]["pixel69"], MNIST[0]["pixel70"], MNIST[0]["pixel71"], MNIST[0]["pixel72"], MNIST[0]["pixel73"], MNIST[0]["pixel74"], MNIST[0]["pixel75"], MNIST[0]["pixel76"], MNIST[0]["pixel77"], MNIST[0]["pixel78"], MNIST[0]["pixel79"], MNIST[0]["pixel80"], MNIST[0]["pixel81"], MNIST[0]["pixel82"], MNIST[0]["pixel83"], MNIST[0]["pixel84"], MNIST[0]["pixel85"], MNIST[0]["pixel86"], MNIST[0]["pixel87"], MNIST[0]["pixel88"], MNIST[0]["pixel89"], MNIST[0]["pixel90"], MNIST[0]["pixel91"], MNIST[0]["pixel92"], MNIST[0]["pixel93"], MNIST[0]["pixel94"], MNIST[0]["pixel95"], MNIST[0]["pixel96"], MNIST[0]["pixel97"], MNIST[0]["pixel98"], MNIST[0]["pixel99"], MNIST[0]["pixel100"], MNIST[0]["pixel101"], MNIST[0]["pixel102"], MNIST[0]["pixel103"], MNIST[0]["pixel104"], MNIST[0]["pixel105"], MNIST[0]["pixel106"], MNIST[0]["pixel107"], MNIST[0]["pixel108"], MNIST[0]["pixel109"], MNIST[0]["pixel110"], MNIST[0]["pixel111"], MNIST[0]["pixel112"], MNIST[0]["pixel113"], MNIST[0]["pixel114"], MNIST[0]["pixel115"], MNIST[0]["pixel116"], MNIST[0]["pixel117"], MNIST[0]["pixel118"], MNIST[0]["pixel119"], MNIST[0]["pixel120"], MNIST[0]["pixel121"], MNIST[0]["pixel122"], MNIST[0]["pixel123"], MNIST[0]["pixel124"], MNIST[0]["pixel125"], MNIST[0]["pixel126"], MNIST[0]["pixel127"], MNIST[0]["pixel128"], MNIST[0]["pixel129"], MNIST[0]["pixel130"], MNIST[0]["pixel131"], MNIST[0]["pixel132"], MNIST[0]["pixel133"], MNIST[0]["pixel134"], MNIST[0]["pixel135"], MNIST[0]["pixel136"], MNIST[0]["pixel137"], MNIST[0]["pixel138"], MNIST[0]["pixel139"], MNIST[0]["pixel140"], MNIST[0]["pixel141"], MNIST[0]["pixel142"], MNIST[0]["pixel143"], MNIST[0]["pixel144"], MNIST[0]["pixel145"], MNIST[0]["pixel146"], MNIST[0]["pixel147"], MNIST[0]["pixel148"], MNIST[0]["pixel149"], MNIST[0]["pixel150"], MNIST[0]["pixel151"], MNIST[0]["pixel152"], MNIST[0]["pixel153"], MNIST[0]["pixel154"], MNIST[0]["pixel155"], MNIST[0]["pixel156"], MNIST[0]["pixel157"], MNIST[0]["pixel158"], MNIST[0]["pixel159"], MNIST[0]["pixel160"], MNIST[0]["pixel161"], MNIST[0]["pixel162"], MNIST[0]["pixel163"], MNIST[0]["pixel164"], MNIST[0]["pixel165"], MNIST[0]["pixel166"], MNIST[0]["pixel167"], MNIST[0]["pixel168"], MNIST[0]["pixel169"], MNIST[0]["pixel170"], MNIST[0]["pixel171"], MNIST[0]["pixel172"], MNIST[0]["pixel173"], MNIST[0]["pixel174"], MNIST[0]["pixel175"], MNIST[0]["pixel176"], MNIST[0]["pixel177"], MNIST[0]["pixel178"], MNIST[0]["pixel179"], MNIST[0]["pixel180"], MNIST[0]["pixel181"], MNIST[0]["pixel182"], MNIST[0]["pixel183"], MNIST[0]["pixel184"], MNIST[0]["pixel185"], MNIST[0]["pixel186"], MNIST[0]["pixel187"], MNIST[0]["pixel188"], MNIST[0]["pixel189"], MNIST[0]["pixel190"], MNIST[0]["pixel191"], MNIST[0]["pixel192"], MNIST[0]["pixel193"], MNIST[0]["pixel194"], MNIST[0]["pixel195"], MNIST[0]["pixel196"], MNIST[0]["pixel197"], MNIST[0]["pixel198"], MNIST[0]["pixel199"], MNIST[0]["pixel200"], MNIST[0]["pixel201"], MNIST[0]["pixel202"], MNIST[0]["pixel203"], MNIST[0]["pixel204"], MNIST[0]["pixel205"], MNIST[0]["pixel206"], MNIST[0]["pixel207"], MNIST[0]["pixel208"], MNIST[0]["pixel209"], MNIST[0]["pixel210"], MNIST[0]["pixel211"], MNIST[0]["pixel212"], MNIST[0]["pixel213"], MNIST[0]["pixel214"], MNIST[0]["pixel215"], MNIST[0]["pixel216"], MNIST[0]["pixel217"], MNIST[0]["pixel218"], MNIST[0]["pixel219"], MNIST[0]["pixel220"], MNIST[0]["pixel221"], MNIST[0]["pixel222"], MNIST[0]["pixel223"], MNIST[0]["pixel224"], MNIST[0]["pixel225"], MNIST[0]["pixel226"], MNIST[0]["pixel227"], MNIST[0]["pixel228"], MNIST[0]["pixel229"], MNIST[0]["pixel230"], MNIST[0]["pixel231"], MNIST[0]["pixel232"], MNIST[0]["pixel233"], MNIST[0]["pixel234"], MNIST[0]["pixel235"], MNIST[0]["pixel236"], MNIST[0]["pixel237"], MNIST[0]["pixel238"], MNIST[0]["pixel239"], MNIST[0]["pixel240"], MNIST[0]["pixel241"], MNIST[0]["pixel242"], MNIST[0]["pixel243"], MNIST[0]["pixel244"], MNIST[0]["pixel245"], MNIST[0]["pixel246"], MNIST[0]["pixel247"], MNIST[0]["pixel248"], MNIST[0]["pixel249"], MNIST[0]["pixel250"], MNIST[0]["pixel251"], MNIST[0]["pixel252"], MNIST[0]["pixel253"], MNIST[0]["pixel254"], MNIST[0]["pixel255"], MNIST[0]["pixel256"], MNIST[0]["pixel257"], MNIST[0]["pixel258"], MNIST[0]["pixel259"], MNIST[0]["pixel260"], MNIST[0]["pixel261"], MNIST[0]["pixel262"], MNIST[0]["pixel263"], MNIST[0]["pixel264"], MNIST[0]["pixel265"], MNIST[0]["pixel266"], MNIST[0]["pixel267"], MNIST[0]["pixel268"], MNIST[0]["pixel269"], MNIST[0]["pixel270"], MNIST[0]["pixel271"], MNIST[0]["pixel272"], MNIST[0]["pixel273"], MNIST[0]["pixel274"], MNIST[0]["pixel275"], MNIST[0]["pixel276"], MNIST[0]["pixel277"], MNIST[0]["pixel278"], MNIST[0]["pixel279"], MNIST[0]["pixel280"], MNIST[0]["pixel281"], MNIST[0]["pixel282"], MNIST[0]["pixel283"], MNIST[0]["pixel284"], MNIST[0]["pixel285"], MNIST[0]["pixel286"], MNIST[0]["pixel287"], MNIST[0]["pixel288"], MNIST[0]["pixel289"], MNIST[0]["pixel290"], MNIST[0]["pixel291"], MNIST[0]["pixel292"], MNIST[0]["pixel293"], MNIST[0]["pixel294"], MNIST[0]["pixel295"], MNIST[0]["pixel296"], MNIST[0]["pixel297"], MNIST[0]["pixel298"], MNIST[0]["pixel299"], MNIST[0]["pixel300"], MNIST[0]["pixel301"], MNIST[0]["pixel302"], MNIST[0]["pixel303"], MNIST[0]["pixel304"], MNIST[0]["pixel305"], MNIST[0]["pixel306"], MNIST[0]["pixel307"], MNIST[0]["pixel308"], MNIST[0]["pixel309"], MNIST[0]["pixel310"], MNIST[0]["pixel311"], MNIST[0]["pixel312"], MNIST[0]["pixel313"], MNIST[0]["pixel314"], MNIST[0]["pixel315"], MNIST[0]["pixel316"], MNIST[0]["pixel317"], MNIST[0]["pixel318"], MNIST[0]["pixel319"], MNIST[0]["pixel320"], MNIST[0]["pixel321"], MNIST[0]["pixel322"], MNIST[0]["pixel323"], MNIST[0]["pixel324"], MNIST[0]["pixel325"], MNIST[0]["pixel326"], MNIST[0]["pixel327"], MNIST[0]["pixel328"], MNIST[0]["pixel329"], MNIST[0]["pixel330"], MNIST[0]["pixel331"], MNIST[0]["pixel332"], MNIST[0]["pixel333"], MNIST[0]["pixel334"], MNIST[0]["pixel335"], MNIST[0]["pixel336"], MNIST[0]["pixel337"], MNIST[0]["pixel338"], MNIST[0]["pixel339"], MNIST[0]["pixel340"], MNIST[0]["pixel341"], MNIST[0]["pixel342"], MNIST[0]["pixel343"], MNIST[0]["pixel344"], MNIST[0]["pixel345"], MNIST[0]["pixel346"], MNIST[0]["pixel347"], MNIST[0]["pixel348"], MNIST[0]["pixel349"], MNIST[0]["pixel350"], MNIST[0]["pixel351"], MNIST[0]["pixel352"], MNIST[0]["pixel353"], MNIST[0]["pixel354"], MNIST[0]["pixel355"], MNIST[0]["pixel356"], MNIST[0]["pixel357"], MNIST[0]["pixel358"], MNIST[0]["pixel359"], MNIST[0]["pixel360"], MNIST[0]["pixel361"], MNIST[0]["pixel362"], MNIST[0]["pixel363"], MNIST[0]["pixel364"], MNIST[0]["pixel365"], MNIST[0]["pixel366"], MNIST[0]["pixel367"], MNIST[0]["pixel368"], MNIST[0]["pixel369"], MNIST[0]["pixel370"], MNIST[0]["pixel371"], MNIST[0]["pixel372"], MNIST[0]["pixel373"], MNIST[0]["pixel374"], MNIST[0]["pixel375"], MNIST[0]["pixel376"], MNIST[0]["pixel377"], MNIST[0]["pixel378"], MNIST[0]["pixel379"], MNIST[0]["pixel380"], MNIST[0]["pixel381"], MNIST[0]["pixel382"], MNIST[0]["pixel383"], MNIST[0]["pixel384"], MNIST[0]["pixel385"], MNIST[0]["pixel386"], MNIST[0]["pixel387"], MNIST[0]["pixel388"], MNIST[0]["pixel389"], MNIST[0]["pixel390"], MNIST[0]["pixel391"], MNIST[0]["pixel392"], MNIST[0]["pixel393"], MNIST[0]["pixel394"], MNIST[0]["pixel395"], MNIST[0]["pixel396"], MNIST[0]["pixel397"], MNIST[0]["pixel398"], MNIST[0]["pixel399"], MNIST[0]["pixel400"], MNIST[0]["pixel401"], MNIST[0]["pixel402"], MNIST[0]["pixel403"], MNIST[0]["pixel404"], MNIST[0]["pixel405"], MNIST[0]["pixel406"], MNIST[0]["pixel407"], MNIST[0]["pixel408"], MNIST[0]["pixel409"], MNIST[0]["pixel410"], MNIST[0]["pixel411"], MNIST[0]["pixel412"], MNIST[0]["pixel413"], MNIST[0]["pixel414"], MNIST[0]["pixel415"], MNIST[0]["pixel416"], MNIST[0]["pixel417"], MNIST[0]["pixel418"], MNIST[0]["pixel419"], MNIST[0]["pixel420"], MNIST[0]["pixel421"], MNIST[0]["pixel422"], MNIST[0]["pixel423"], MNIST[0]["pixel424"], MNIST[0]["pixel425"], MNIST[0]["pixel426"], MNIST[0]["pixel427"], MNIST[0]["pixel428"], MNIST[0]["pixel429"], MNIST[0]["pixel430"], MNIST[0]["pixel431"], MNIST[0]["pixel432"], MNIST[0]["pixel433"], MNIST[0]["pixel434"], MNIST[0]["pixel435"], MNIST[0]["pixel436"], MNIST[0]["pixel437"], MNIST[0]["pixel438"], MNIST[0]["pixel439"], MNIST[0]["pixel440"], MNIST[0]["pixel441"], MNIST[0]["pixel442"], MNIST[0]["pixel443"], MNIST[0]["pixel444"], MNIST[0]["pixel445"], MNIST[0]["pixel446"], MNIST[0]["pixel447"], MNIST[0]["pixel448"], MNIST[0]["pixel449"], MNIST[0]["pixel450"], MNIST[0]["pixel451"], MNIST[0]["pixel452"], MNIST[0]["pixel453"], MNIST[0]["pixel454"], MNIST[0]["pixel455"], MNIST[0]["pixel456"], MNIST[0]["pixel457"], MNIST[0]["pixel458"], MNIST[0]["pixel459"], MNIST[0]["pixel460"], MNIST[0]["pixel461"], MNIST[0]["pixel462"], MNIST[0]["pixel463"], MNIST[0]["pixel464"], MNIST[0]["pixel465"], MNIST[0]["pixel466"], MNIST[0]["pixel467"], MNIST[0]["pixel468"], MNIST[0]["pixel469"], MNIST[0]["pixel470"], MNIST[0]["pixel471"], MNIST[0]["pixel472"], MNIST[0]["pixel473"], MNIST[0]["pixel474"], MNIST[0]["pixel475"], MNIST[0]["pixel476"], MNIST[0]["pixel477"], MNIST[0]["pixel478"], MNIST[0]["pixel479"], MNIST[0]["pixel480"], MNIST[0]["pixel481"], MNIST[0]["pixel482"], MNIST[0]["pixel483"], MNIST[0]["pixel484"], MNIST[0]["pixel485"], MNIST[0]["pixel486"], MNIST[0]["pixel487"], MNIST[0]["pixel488"], MNIST[0]["pixel489"], MNIST[0]["pixel490"], MNIST[0]["pixel491"], MNIST[0]["pixel492"], MNIST[0]["pixel493"], MNIST[0]["pixel494"], MNIST[0]["pixel495"], MNIST[0]["pixel496"], MNIST[0]["pixel497"], MNIST[0]["pixel498"], MNIST[0]["pixel499"], MNIST[0]["pixel500"], MNIST[0]["pixel501"], MNIST[0]["pixel502"], MNIST[0]["pixel503"], MNIST[0]["pixel504"], MNIST[0]["pixel505"], MNIST[0]["pixel506"], MNIST[0]["pixel507"], MNIST[0]["pixel508"], MNIST[0]["pixel509"], MNIST[0]["pixel510"], MNIST[0]["pixel511"], MNIST[0]["pixel512"], MNIST[0]["pixel513"], MNIST[0]["pixel514"], MNIST[0]["pixel515"], MNIST[0]["pixel516"], MNIST[0]["pixel517"], MNIST[0]["pixel518"], MNIST[0]["pixel519"], MNIST[0]["pixel520"], MNIST[0]["pixel521"], MNIST[0]["pixel522"], MNIST[0]["pixel523"], MNIST[0]["pixel524"], MNIST[0]["pixel525"], MNIST[0]["pixel526"], MNIST[0]["pixel527"], MNIST[0]["pixel528"], MNIST[0]["pixel529"], MNIST[0]["pixel530"], MNIST[0]["pixel531"], MNIST[0]["pixel532"], MNIST[0]["pixel533"], MNIST[0]["pixel534"], MNIST[0]["pixel535"], MNIST[0]["pixel536"], MNIST[0]["pixel537"], MNIST[0]["pixel538"], MNIST[0]["pixel539"], MNIST[0]["pixel540"], MNIST[0]["pixel541"], MNIST[0]["pixel542"], MNIST[0]["pixel543"], MNIST[0]["pixel544"], MNIST[0]["pixel545"], MNIST[0]["pixel546"], MNIST[0]["pixel547"], MNIST[0]["pixel548"], MNIST[0]["pixel549"], MNIST[0]["pixel550"], MNIST[0]["pixel551"], MNIST[0]["pixel552"], MNIST[0]["pixel553"], MNIST[0]["pixel554"], MNIST[0]["pixel555"], MNIST[0]["pixel556"], MNIST[0]["pixel557"], MNIST[0]["pixel558"], MNIST[0]["pixel559"], MNIST[0]["pixel560"], MNIST[0]["pixel561"], MNIST[0]["pixel562"], MNIST[0]["pixel563"], MNIST[0]["pixel564"], MNIST[0]["pixel565"], MNIST[0]["pixel566"], MNIST[0]["pixel567"], MNIST[0]["pixel568"], MNIST[0]["pixel569"], MNIST[0]["pixel570"], MNIST[0]["pixel571"], MNIST[0]["pixel572"], MNIST[0]["pixel573"], MNIST[0]["pixel574"], MNIST[0]["pixel575"], MNIST[0]["pixel576"], MNIST[0]["pixel577"], MNIST[0]["pixel578"], MNIST[0]["pixel579"], MNIST[0]["pixel580"], MNIST[0]["pixel581"], MNIST[0]["pixel582"], MNIST[0]["pixel583"], MNIST[0]["pixel584"], MNIST[0]["pixel585"], MNIST[0]["pixel586"], MNIST[0]["pixel587"], MNIST[0]["pixel588"], MNIST[0]["pixel589"], MNIST[0]["pixel590"], MNIST[0]["pixel591"], MNIST[0]["pixel592"], MNIST[0]["pixel593"], MNIST[0]["pixel594"], MNIST[0]["pixel595"], MNIST[0]["pixel596"], MNIST[0]["pixel597"], MNIST[0]["pixel598"], MNIST[0]["pixel599"], MNIST[0]["pixel600"], MNIST[0]["pixel601"], MNIST[0]["pixel602"], MNIST[0]["pixel603"], MNIST[0]["pixel604"], MNIST[0]["pixel605"], MNIST[0]["pixel606"], MNIST[0]["pixel607"], MNIST[0]["pixel608"], MNIST[0]["pixel609"], MNIST[0]["pixel610"], MNIST[0]["pixel611"], MNIST[0]["pixel612"], MNIST[0]["pixel613"], MNIST[0]["pixel614"], MNIST[0]["pixel615"], MNIST[0]["pixel616"], MNIST[0]["pixel617"], MNIST[0]["pixel618"], MNIST[0]["pixel619"], MNIST[0]["pixel620"], MNIST[0]["pixel621"], MNIST[0]["pixel622"], MNIST[0]["pixel623"], MNIST[0]["pixel624"], MNIST[0]["pixel625"], MNIST[0]["pixel626"], MNIST[0]["pixel627"], MNIST[0]["pixel628"], MNIST[0]["pixel629"], MNIST[0]["pixel630"], MNIST[0]["pixel631"], MNIST[0]["pixel632"], MNIST[0]["pixel633"], MNIST[0]["pixel634"], MNIST[0]["pixel635"], MNIST[0]["pixel636"], MNIST[0]["pixel637"], MNIST[0]["pixel638"], MNIST[0]["pixel639"], MNIST[0]["pixel640"], MNIST[0]["pixel641"], MNIST[0]["pixel642"], MNIST[0]["pixel643"], MNIST[0]["pixel644"], MNIST[0]["pixel645"], MNIST[0]["pixel646"], MNIST[0]["pixel647"], MNIST[0]["pixel648"], MNIST[0]["pixel649"], MNIST[0]["pixel650"], MNIST[0]["pixel651"], MNIST[0]["pixel652"], MNIST[0]["pixel653"], MNIST[0]["pixel654"], MNIST[0]["pixel655"], MNIST[0]["pixel656"], MNIST[0]["pixel657"], MNIST[0]["pixel658"], MNIST[0]["pixel659"], MNIST[0]["pixel660"], MNIST[0]["pixel661"], MNIST[0]["pixel662"], MNIST[0]["pixel663"], MNIST[0]["pixel664"], MNIST[0]["pixel665"], MNIST[0]["pixel666"], MNIST[0]["pixel667"], MNIST[0]["pixel668"], MNIST[0]["pixel669"], MNIST[0]["pixel670"], MNIST[0]["pixel671"], MNIST[0]["pixel672"], MNIST[0]["pixel673"], MNIST[0]["pixel674"], MNIST[0]["pixel675"], MNIST[0]["pixel676"], MNIST[0]["pixel677"], MNIST[0]["pixel678"], MNIST[0]["pixel679"], MNIST[0]["pixel680"], MNIST[0]["pixel681"], MNIST[0]["pixel682"], MNIST[0]["pixel683"], MNIST[0]["pixel684"], MNIST[0]["pixel685"], MNIST[0]["pixel686"], MNIST[0]["pixel687"], MNIST[0]["pixel688"], MNIST[0]["pixel689"], MNIST[0]["pixel690"], MNIST[0]["pixel691"], MNIST[0]["pixel692"], MNIST[0]["pixel693"], MNIST[0]["pixel694"], MNIST[0]["pixel695"], MNIST[0]["pixel696"], MNIST[0]["pixel697"], MNIST[0]["pixel698"], MNIST[0]["pixel699"], MNIST[0]["pixel700"], MNIST[0]["pixel701"], MNIST[0]["pixel702"], MNIST[0]["pixel703"], MNIST[0]["pixel704"], MNIST[0]["pixel705"], MNIST[0]["pixel706"], MNIST[0]["pixel707"], MNIST[0]["pixel708"], MNIST[0]["pixel709"], MNIST[0]["pixel710"], MNIST[0]["pixel711"], MNIST[0]["pixel712"], MNIST[0]["pixel713"], MNIST[0]["pixel714"], MNIST[0]["pixel715"], MNIST[0]["pixel716"], MNIST[0]["pixel717"], MNIST[0]["pixel718"], MNIST[0]["pixel719"], MNIST[0]["pixel720"], MNIST[0]["pixel721"], MNIST[0]["pixel722"], MNIST[0]["pixel723"], MNIST[0]["pixel724"], MNIST[0]["pixel725"], MNIST[0]["pixel726"], MNIST[0]["pixel727"], MNIST[0]["pixel728"], MNIST[0]["pixel729"], MNIST[0]["pixel730"], MNIST[0]["pixel731"], MNIST[0]["pixel732"], MNIST[0]["pixel733"], MNIST[0]["pixel734"], MNIST[0]["pixel735"], MNIST[0]["pixel736"], MNIST[0]["pixel737"], MNIST[0]["pixel738"], MNIST[0]["pixel739"], MNIST[0]["pixel740"], MNIST[0]["pixel741"], MNIST[0]["pixel742"], MNIST[0]["pixel743"], MNIST[0]["pixel744"], MNIST[0]["pixel745"], MNIST[0]["pixel746"], MNIST[0]["pixel747"], MNIST[0]["pixel748"], MNIST[0]["pixel749"], MNIST[0]["pixel750"], MNIST[0]["pixel751"], MNIST[0]["pixel752"], MNIST[0]["pixel753"], MNIST[0]["pixel754"], MNIST[0]["pixel755"], MNIST[0]["pixel756"], MNIST[0]["pixel757"], MNIST[0]["pixel758"], MNIST[0]["pixel759"], MNIST[0]["pixel760"], MNIST[0]["pixel761"], MNIST[0]["pixel762"], MNIST[0]["pixel763"], MNIST[0]["pixel764"], MNIST[0]["pixel765"], MNIST[0]["pixel766"], MNIST[0]["pixel767"], MNIST[0]["pixel768"], MNIST[0]["pixel769"], MNIST[0]["pixel770"], MNIST[0]["pixel771"], MNIST[0]["pixel772"], MNIST[0]["pixel773"], MNIST[0]["pixel774"], MNIST[0]["pixel775"], MNIST[0]["pixel776"], MNIST[0]["pixel777"], MNIST[0]["pixel778"], MNIST[0]["pixel779"], MNIST[0]["pixel780"], MNIST[0]["pixel781"], MNIST[0]["pixel782"], MNIST[0]["pixel783"]),
        	)
        	conn.commit()
        	cur.execute("SELECT LASTVAL()")
        	user_id = cur.fetchone()[0]
        	cur.close()
        	return json.dumps({"user_id": user_id})




if __name__ == "__main__":
    app.run(host="0.0.0.0", debug=True, port=8080)
